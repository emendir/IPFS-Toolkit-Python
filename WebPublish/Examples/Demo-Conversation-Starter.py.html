<html>
<head>
  <meta charset="UTF-8">
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="https://rawgithub.com/highlightjs/cdn-release/master/build/styles/atom-one-dark.min.css">
  <script src="https://rawgithub.com/highlightjs/cdn-release/master/build/highlight.min.js"></script>
  <script src="https://rawgithub.com/highlightjs/cdn-release/master/build/languages/python.min.js"></script>
  <style>
    body {
      margin: 0px;
      padding: 15px;
      font-size: 12
    }
    .hljs {
      margin: -15px;
      word-wrap: break-word;
    }
    body, .hljs {
      font-family: Menlo, Consolas, DejaVu Sans Mono, monospace;
    }
    .number {
      float:left;
      text-align: right;
      display: inline-block;
      margin-right: 5px;
    }
    .ln {
      opacity: 0.5;
    }
    pre {
      tab-size:      4;
    }
  </style>
</head>
<body>
<pre><code class="py">
&quot;&quot;&quot;
This script demonstrates, together with Demo-Conversation-Receiver,
the usage of the IPFS_DataTransmission.Conversation class.

Run Demo-Conversation-Receiver.py on another computer,
make sure IPFS is running on both computers first,
paste the other&#x27;s IPFS ID in the peerID variable below,
and then run this script.
&quot;&quot;&quot;

import time
import IPFS_DataTransmission
import IPFS_API


# replace QmHash with your peer&#x27;s IPFS ID
peerID = &quot;QmHash&quot;

# making sure our IPFS node finds the receiver computer on the IP layer of the internet
IPFS_API.FindPeer(peerID)


def OnMessageReceived(conversation, data, peerID):
    &quot;&quot;&quot;Eventhandler for messages from the other peer.&quot;&quot;&quot;
    print(&quot;Received message:&quot;, data.decode(&#x27;utf-8&#x27;))


# Starting a conversation with name &quot;test-con&quot;,
# where the peer is listening for conversations on a ConversationListener called &quot;general_listener&quot;,
# waiting for the peer to join the conversation until executing the next line of code
print(&quot;Setting up conversation...&quot;)
conv = IPFS_DataTransmission.StartConversationAwait(
    &quot;test-con&quot;, peerID, &quot;general_listener&quot;, OnMessageReceived)
print(&quot;Peer joined conversation.&quot;)
conv.Say(&quot;Hello there!&quot;.encode(&#x27;utf-8&#x27;))

# endless loop to stop program from terminating
while True:
    time.sleep(1)

</code></pre>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  setTimeout(function() {
    $(".number").css("width", "20px");
    $(".number span").attr("class", "ln hljs-subst");
    resize();
    var timer = false;
    $(window).resize(function() {
      if (timer !== false) {
        clearTimeout(timer);
      }
      timer = setTimeout(function() {
        resize();
      }, 200);
    })

  }, 100);
  function resize() {
    $("span.code").each(function(i, c) {
      var h = $(c).height();
      $(c).prev().height(h);
    });
  }
</script>
</body>
</html>