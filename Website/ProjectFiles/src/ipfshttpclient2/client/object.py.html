<html>
<head>
  <meta charset="UTF-8">
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="https://rawgithub.com/highlightjs/cdn-release/master/build/styles/atom-one-dark.min.css">
  <script src="https://rawgithub.com/highlightjs/cdn-release/master/build/highlight.min.js"></script>
  <script src="https://rawgithub.com/highlightjs/cdn-release/master/build/languages/python.min.js"></script>
  <style>
    body {
      margin: 0px;
      padding: 15px;
      font-size: 12
    }
    .hljs {
      margin: -15px;
      word-wrap: break-word;
    }
    body, .hljs {
      font-family: Menlo, Consolas, DejaVu Sans Mono, monospace;
    }
    .number {
      float:left;
      text-align: right;
      display: inline-block;
      margin-right: 5px;
    }
    .ln {
      opacity: 0.5;
    }
    pre {
      tab-size:      4;
    }
  </style>
</head>
<body>
<pre><code class="py">
import typing as ty

from . import base

from .. import multipart
from .. import utils


class PatchSection(base.SectionBase):
	@base.returns_single_item(base.ResponseBase)
	def add_link(self, root: base.cid_t, name: str, ref: base.cid_t,
	             create: bool = False, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Creates a new merkledag object based on an existing one
		
		The new object will have an additional link to the given CID.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.patch.add_link(
			...     &#x27;QmR79zQQj2aDfnrNgczUhvf2qWapEfQ82YQRt3QjrbhSb2&#x27;,
			...     &#x27;Johnny&#x27;,
			...     &#x27;QmR79zQQj2aDfnrNgczUhvf2qWapEfQ82YQRt3QjrbhSb2&#x27;
			... )
			{&#x27;Hash&#x27;: &#x27;QmNtXbF3AjAk59gQKRgEdVabHcSsiPUnJwHnZKyj2x8Z3k&#x27;}
		
		Parameters
		----------
		root
			IPFS hash for the object being modified
		name
			name for the new link
		ref
			IPFS hash for the object being linked to
		create
			Create intermediary nodes
		
		Returns
		-------
			dict
		
		+------+----------------------------------+
		| Hash | Hash of the newly derived object |
		+------+----------------------------------+
		&quot;&quot;&quot;
		kwargs.setdefault(&quot;opts&quot;, {})[&quot;create&quot;] = create
		
		args = (str(root), name, str(ref),)
		return self._client.request(&#x27;/object/patch/add-link&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def append_data(self, cid: base.cid_t, new_data: utils.clean_file_t,
	                **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Creates a new merkledag object based on an existing one
		
		The new object will have the same links as the previous object, but with
		the provided data appended to it.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.patch.append_data(&quot;QmZZmY … fTqm&quot;, io.BytesIO(b&quot;bla&quot;))
			{&#x27;Hash&#x27;: &#x27;QmR79zQQj2aDfnrNgczUhvf2qWapEfQ82YQRt3QjrbhSb2&#x27;}
		
		Parameters
		----------
		cid
			The hash of an ipfs object to modify
		new_data
			The data to append to the object&#x27;s data section
		
		Returns
		-------
			dict
		
		+------+----------------------------------+
		| Hash | Hash of the newly derived object |
		+------+----------------------------------+
		&quot;&quot;&quot;
		args = (str(cid),)
		body, headers = multipart.stream_files(new_data, chunk_size=self.chunk_size)
		return self._client.request(&#x27;/object/patch/append-data&#x27;, args, decoder=&#x27;json&#x27;,
		                            data=body, headers=headers, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def rm_link(self, root: base.cid_t, link: str, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Creates a new merkledag object based on an existing one
		
		The new object will lack a link to the specified object, but otherwise
		be unchanged.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.patch.rm_link(
			...     &#x27;QmNtXbF3AjAk59gQKRgEdVabHcSsiPUnJwHnZKyj2x8Z3k&#x27;,
			...     &#x27;Johnny&#x27;
			... )
			{&#x27;Hash&#x27;: &#x27;QmR79zQQj2aDfnrNgczUhvf2qWapEfQ82YQRt3QjrbhSb2&#x27;}
		
		Parameters
		----------
		root
			IPFS hash of the object to modify
		link
			name of the link to remove
		
		Returns
		-------
			dict
		
		+------+----------------------------------+
		| Hash | Hash of the newly derived object |
		+------+----------------------------------+
		&quot;&quot;&quot;
		args = (str(root), link)
		return self._client.request(&#x27;/object/patch/rm-link&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def set_data(self, root: base.cid_t, data: utils.clean_file_t,
	             **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Creates a new merkledag object based on an existing one
		
		The new object will have the same links as the old object but
		with the provided data instead of the old object&#x27;s data contents.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.patch.set_data(
			...     &#x27;QmNtXbF3AjAk59gQKRgEdVabHcSsiPUnJwHnZKyj2x8Z3k&#x27;,
			...     io.BytesIO(b&#x27;bla&#x27;)
			... )
			{&#x27;Hash&#x27;: &#x27;QmSw3k2qkv4ZPsbu9DVEJaTMszAQWNgM1FTFYpfZeNQWrd&#x27;}
		
		Parameters
		----------
		root
			IPFS hash of the object to modify
		data
			The new data to store in root
		
		Returns
		-------
			dict
		
		+------+----------------------------------+
		| Hash | Hash of the newly derived object |
		+------+----------------------------------+
		&quot;&quot;&quot;
		args = (str(root),)
		body, headers = multipart.stream_files(data, chunk_size=self.chunk_size)
		return self._client.request(&#x27;/object/patch/set-data&#x27;, args, decoder=&#x27;json&#x27;, data=body,
		                            headers=headers, **kwargs)



class Section(base.SectionBase):
	patch = base.SectionProperty(PatchSection)
	
	
	def data(self, cid: base.cid_t, **kwargs: base.CommonArgs):
		r&quot;&quot;&quot;Returns the raw bytes in an IPFS object
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.data(&#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDxdXBFca7D&#x27;)
			b&#x27;\x08\x01&#x27;
		
		Parameters
		----------
		cid
			Key of the object to retrieve, in CID format
		
		Returns
		-------
			bytes
				Raw object data
		&quot;&quot;&quot;
		args = (str(cid),)
		return self._client.request(&#x27;/object/data&#x27;, args, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def get(self, cid: base.cid_t, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Get and serialize the DAG node named by CID.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.get(&#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDxdXBFca7D&#x27;)
			{&#x27;Data&#x27;: &#x27;\x08\x01&#x27;,
			 &#x27;Links&#x27;: [
				{&#x27;Hash&#x27;: &#x27;Qmd2xkBfEwEs9oMTk77A6jrsgurpF3ugXSg7dtPNFkcNMV&#x27;,
				 &#x27;Name&#x27;: &#x27;Makefile&#x27;,          &#x27;Size&#x27;: 174},
				{&#x27;Hash&#x27;: &#x27;QmeKozNssnkJ4NcyRidYgDY2jfRZqVEoRGfipkgath71bX&#x27;,
				 &#x27;Name&#x27;: &#x27;example&#x27;,           &#x27;Size&#x27;: 1474},
				{&#x27;Hash&#x27;: &#x27;QmZAL3oHMQYqsV61tGvoAVtQLs1WzRe1zkkamv9qxqnDuK&#x27;,
				 &#x27;Name&#x27;: &#x27;home&#x27;,              &#x27;Size&#x27;: 3947},
				{&#x27;Hash&#x27;: &#x27;QmZNPyKVriMsZwJSNXeQtVQSNU4v4KEKGUQaMT61LPahso&#x27;,
				 &#x27;Name&#x27;: &#x27;lib&#x27;,               &#x27;Size&#x27;: 268261},
				{&#x27;Hash&#x27;: &#x27;QmSY8RfVntt3VdxWppv9w5hWgNrE31uctgTiYwKir8eXJY&#x27;,
				 &#x27;Name&#x27;: &#x27;published-version&#x27;, &#x27;Size&#x27;: 55}
			]}
		
		Parameters
		----------
		cid
			Key of the object to retrieve, in CID format
		
		Returns
		-------
			dict
		
		+-------+------------------------------------------------+
		| Data  | Raw object data (ISO-8859-1 decoded)           |
		+-------+------------------------------------------------+
		| Links | List of links associated with the given object |
		+-------+------------------------------------------------+
		&quot;&quot;&quot;
		args = (str(cid),)
		return self._client.request(&#x27;/object/get&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def links(self, cid: base.cid_t, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Returns the links pointed to by the specified object
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.links(&#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDx … ca7D&#x27;)
			{&#x27;Hash&#x27;: &#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDxdXBFca7D&#x27;,
			 &#x27;Links&#x27;: [
				{&#x27;Hash&#x27;: &#x27;Qmd2xkBfEwEs9oMTk77A6jrsgurpF3ugXSg7dtPNFkcNMV&#x27;,
				 &#x27;Name&#x27;: &#x27;Makefile&#x27;,          &#x27;Size&#x27;: 174},
				{&#x27;Hash&#x27;: &#x27;QmeKozNssnkJ4NcyRidYgDY2jfRZqVEoRGfipkgath71bX&#x27;,
				 &#x27;Name&#x27;: &#x27;example&#x27;,           &#x27;Size&#x27;: 1474},
				{&#x27;Hash&#x27;: &#x27;QmZAL3oHMQYqsV61tGvoAVtQLs1WzRe1zkkamv9qxqnDuK&#x27;,
				 &#x27;Name&#x27;: &#x27;home&#x27;,              &#x27;Size&#x27;: 3947},
				{&#x27;Hash&#x27;: &#x27;QmZNPyKVriMsZwJSNXeQtVQSNU4v4KEKGUQaMT61LPahso&#x27;,
				 &#x27;Name&#x27;: &#x27;lib&#x27;,               &#x27;Size&#x27;: 268261},
				{&#x27;Hash&#x27;: &#x27;QmSY8RfVntt3VdxWppv9w5hWgNrE31uctgTiYwKir8eXJY&#x27;,
				 &#x27;Name&#x27;: &#x27;published-version&#x27;, &#x27;Size&#x27;: 55}]}
		
		Parameters
		----------
		cid
			Key of the object to retrieve, in CID format
		
		Returns
		-------
			dict
		
		+-------+------------------------------------------------+
		| Hash  | The requested object CID                       |
		+-------+------------------------------------------------+
		| Links | List of links associated with the given object |
		+-------+------------------------------------------------+
		&quot;&quot;&quot;
		args = (str(cid),)
		return self._client.request(&#x27;/object/links&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def new(self, template: ty.Optional[str] = None, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Creates a new object from an IPFS template
		
		By default this creates and returns a new empty merkledag node, but you
		may pass an optional template argument to create a preformatted node.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.new()
			{&#x27;Hash&#x27;: &#x27;QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n&#x27;}
		
		Parameters
		----------
		template
			Blueprints from which to construct the new object. Possible values:
			
			 * &#x60;&#x60;&quot;unixfs-dir&quot;&#x60;&#x60;
			 * &#x60;&#x60;None&#x60;&#x60;
		
		Returns
		-------
			dict
		
		+-------+----------------------------------------+
		| Hash  | The hash of the requested empty object |
		+-------+----------------------------------------+
		&quot;&quot;&quot;
		args = (template,) if template is not None else ()
		return self._client.request(&#x27;/object/new&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def put(self, file: utils.clean_file_t, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Stores input as a DAG object and returns its key.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.put(io.BytesIO(b&#x27;&#x27;&#x27;
			...       {
			...           &quot;Data&quot;: &quot;another&quot;,
			...           &quot;Links&quot;: [ {
			...               &quot;Name&quot;: &quot;some link&quot;,
			...               &quot;Hash&quot;: &quot;QmXg9Pp2ytZ14xgmQjYEiHjVjMFXzCV … R39V&quot;,
			...               &quot;Size&quot;: 8
			...           } ]
			...       }&#x27;&#x27;&#x27;))
			{&#x27;Hash&#x27;: &#x27;QmZZmY4KCu9r3e7M2Pcn46Fc5qbn6NpzaAGaYb22kbfTqm&#x27;,
			 &#x27;Links&#x27;: [
				{&#x27;Hash&#x27;: &#x27;QmXg9Pp2ytZ14xgmQjYEiHjVjMFXzCVVEcRTWJBmLgR39V&#x27;,
				 &#x27;Size&#x27;: 8, &#x27;Name&#x27;: &#x27;some link&#x27;}
			 ]
			}
		
		Parameters
		----------
		file
			(JSON) object from which the DAG object will be created
		
		Returns
		-------
			dict
				Hash and links of the created DAG object
				
				See the :meth:&#x60;~ipfshttpclient.Client.object.links&#x60; method for
				details.
		&quot;&quot;&quot;
		body, headers = multipart.stream_files(file, chunk_size=self.chunk_size)
		return self._client.request(&#x27;/object/put&#x27;, decoder=&#x27;json&#x27;, data=body,
		                            headers=headers, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def stat(self, cid: base.cid_t, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Get stats for the DAG node named by cid.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.stat(&#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDxdXBFca7D&#x27;)
			{&#x27;LinksSize&#x27;: 256, &#x27;NumLinks&#x27;: 5,
			 &#x27;Hash&#x27;: &#x27;QmTkzDwWqPbnAh5YiV5VwcTLnGdwSNsNTn2aDxdXBFca7D&#x27;,
			 &#x27;BlockSize&#x27;: 258, &#x27;CumulativeSize&#x27;: 274169, &#x27;DataSize&#x27;: 2}
		
		Parameters
		----------
		cid
			Key of the object to retrieve, in CID format
		
		Returns
		-------
			dict
		&quot;&quot;&quot;
		args = (str(cid),)
		return self._client.request(&#x27;/object/stat&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
	
	
	@base.returns_single_item(base.ResponseBase)
	def diff(self, a: base.cid_t, b: base.cid_t, **kwargs: base.CommonArgs):
		&quot;&quot;&quot;Diff two cids.
		
		.. code-block:: python
		
			&gt;&gt;&gt; client.object.diff(
					&#x27;QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n&#x27;,
			        &#x27;QmV4QR7MCBj5VTi6ddHmXPyjWGzbaKEtX2mx7axA5PA13G&#x27;
				)
			{&#x27;Changes&#x27;: [{
				&#x27;Type&#x27;: 2,
				&#x27;Path&#x27;: &#x27;&#x27;,
				&#x27;Before&#x27;:
					{&#x27;/&#x27;: &#x27;QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n&#x27;},
				&#x27;After&#x27;:
					{&#x27;/&#x27;: &#x27;QmV4QR7MCBj5VTi6ddHmXPyjWGzbaKEtX2mx7axA5PA13G&#x27;}}]}
		
		Parameters
		----------
		a
			Key of object a for comparison
		b
			Key of object b for comparison
		
		Returns
		-------
			dict
		&quot;&quot;&quot;
		args = (str(a), str(b))
		return self._client.request(&#x27;/object/diff&#x27;, args, decoder=&#x27;json&#x27;, **kwargs)
</code></pre>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  setTimeout(function() {
    $(".number").css("width", "20px");
    $(".number span").attr("class", "ln hljs-subst");
    resize();
    var timer = false;
    $(window).resize(function() {
      if (timer !== false) {
        clearTimeout(timer);
      }
      timer = setTimeout(function() {
        resize();
      }, 200);
    })

  }, 100);
  function resize() {
    $("span.code").each(function(i, c) {
      var h = $(c).height();
      $(c).prev().height(h);
    });
  }
</script>
</body>
</html>